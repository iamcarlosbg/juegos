<!DOCTYPE html>
<html lang="es">
<head>
    <meta name="robots" content="noindex, nofollow">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Firebase</title>
    <script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-firestore-compat.js"></script>
    <script src="firebase-config.js"></script>
    <style>
        body {
            font-family: monospace;
            padding: 20px;
            max-width: 800px;
            margin: 0 auto;
            background: #1a1a1a;
            color: #0f0;
        }
        .test { 
            margin: 10px 0; 
            padding: 10px; 
            border: 1px solid #333;
            background: #000;
        }
        .success { color: #0f0; }
        .error { color: #f00; }
        .info { color: #ff0; }
    </style>
</head>
<body>
    <h1>üîç Diagn√≥stico Firebase</h1>
    <div id="results"></div>

    <script>
    const log = (msg, type = 'info') => {
        const div = document.createElement('div');
        div.className = `test ${type}`;
        div.textContent = msg;
        document.getElementById('results').appendChild(div);
    };

    async function runTests() {
        log('üöÄ Iniciando pruebas...', 'info');
        
        // Test 1: Firebase Config
        log('\nüìã Test 1: Verificar firebase-config.js', 'info');
        if (typeof firebaseConfig === 'undefined') {
            log('‚ùå ERROR: firebaseConfig no est√° definido', 'error');
            log('   Aseg√∫rate de que firebase-config.js tiene las credenciales correctas', 'error');
            return;
        }
        
        if (firebaseConfig.apiKey === 'TU_API_KEY_AQUI') {
            log('‚ùå ERROR: Firebase no est√° configurado', 'error');
            log('   Necesitas editar firebase-config.js con tus credenciales reales', 'error');
            log('   Ve a console.firebase.google.com', 'error');
            return;
        }
        
        log('‚úÖ firebase-config.js cargado', 'success');
        log(`   Project ID: ${firebaseConfig.projectId}`, 'info');
        
        // Test 2: Inicializar Firebase
        log('\nüìã Test 2: Inicializar Firebase', 'info');
        try {
            const result = await initFirebase('test');
            if (result) {
                log('‚úÖ Firebase inicializado correctamente', 'success');
            } else {
                log('‚ùå Firebase fall√≥ al inicializar', 'error');
                return;
            }
        } catch (error) {
            log(`‚ùå ERROR al inicializar: ${error.message}`, 'error');
            return;
        }
        
        // Test 3: Leer datos
        log('\nüìã Test 3: Intentar leer puntuaciones', 'info');
        try {
            const scores = await getTopScoresFromFirebase(10);
            log(`‚úÖ Lectura exitosa: ${scores.length} puntuaciones encontradas`, 'success');
            
            if (scores.length > 0) {
                log('\nüìä Primeras 3 puntuaciones:', 'info');
                scores.slice(0, 3).forEach((s, i) => {
                    log(`   ${i+1}. ${s.name} - ${s.score} pts (${s.level})`, 'info');
                });
            } else {
                log('‚ö†Ô∏è No hay puntuaciones guardadas a√∫n', 'info');
                log('   Juega un juego y guarda tu puntuaci√≥n', 'info');
            }
        } catch (error) {
            log(`‚ùå ERROR al leer datos: ${error.message}`, 'error');
            log('   Ver